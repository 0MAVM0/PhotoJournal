{% extends 'web/base.html' %}

{% block content %}
<div class="bg-white rounded-lg shadow flex">
    <div class="w-2/3">
        <img src="{{ post.image.url }}" alt="Post" class="w-full h-full object-cover">
    </div>
    <div class="w-1/3 p-4">
        <div class="flex items-center mb-4">
            <img src="{{ post.user.avatar.url }}" alt="{{ post.user.username }}" class="w-10 h-10 rounded-full mr-2">
            <a href="{% url 'web:profile' post.user.username %}" class="font-semibold">{{ post.user.username }}</a>
        </div>
        <div class="flex items-center mb-4">
            <button class="like-btn text-gray-600" data-post-id="{{ post.id }}"
                    data-liked="{{ post.is_liked_by_me|yesno:'true,false' }}">
                <i class="fas fa-heart {% if post.is_liked_by_me %}text-red-500{% endif %}"></i>
            </button>
            <span>{{ post.likes_count }} likes</span>
        </div>
        <p>{{ post.caption }}</p>
        <div class="mt-4 max-h-96 overflow-y-auto">
            {% for comment in comments %}
                <p><strong>{{ comment.user }}</strong> {{ comment.content }}</p>
            {% endfor %}
        </div>
        <form class="mt-4 comment-form" data-post-id="{{ post.id }}">
            <input type="text" name="content" placeholder="Add a comment..." class="w-full p-2 border rounded">
            <button type="submit" class="text-blue-500">Post</button>
        </form>
    </div>
</div>
{% endblock %}